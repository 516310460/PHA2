(window.webpackJsonp=window.webpackJsonp||[]).push([[8,7],{1166:function(e,t,n){"use strict";n.r(t);var r=n(3),l=n(4),o=(n(42),n(79),n(80),function(){function e(t,n){Object(r.a)(this,e),this.self=n,this.subscribers={},this.requestsPending=0,this.historyProvider=t}return Object(l.a)(e,[{key:"subscribeBars",value:function(e,t,n,r){"4hour"!=this.self.interval&&"240"!=t||(t="240"),"1day"!=this.self.interval&&"1day"!=t||(t="1D"),"1week"!=this.self.interval&&"1week"!=t&&"10080"!=this.self.interval&&"10080"!=t||(t="10080"),"1mon"!=this.self.interval&&"1mon"!=t&&"43200"!=this.self.interval&&"43200"!=t||(t="43200"),this.subscribers[r]={lastBarTime:null,listener:n,resolution:t,symbolInfo:e}}},{key:"unsubscribeBars",value:function(e){delete this.subscribers[e]}},{key:"updateData",value:function(){var e=this;if(2==this.self.connState&&(this.requestsPending=0),!this.requestsPending)for(var t in this.requestsPending=0,this.subscribers)this.requestsPending++,this.updateDataForSubscriber(t).then((function(){return e.requestsPending--})).catch((function(){return e.requestsPending--}))}},{key:"updateDataForSubscriber",value:function(e){var t=this;return new Promise((function(n,r){var l=t.subscribers[e],o=parseInt((Date.now()/1e3).toString()),f=o-t.periodLengthSeconds(l.resolution,10);t.historyProvider.getBars(l.symbolInfo,l.resolution,f,o,(function(r){t.onSubscriberDataReceived(e,r),n()}),(function(){r()}))}))}},{key:"onSubscriberDataReceived",value:function(e,t){if(this.subscribers.hasOwnProperty(e)&&t.length){var n=t[t.length-1],r=this.subscribers[e];if(!(null!==r.lastBarTime&&n.time<r.lastBarTime)){if(null!==r.lastBarTime&&n.time>r.lastBarTime){if(t.length<2)throw new Error("Not enough bars in history for proper pulse update. Need at least 2.");var l=t[t.length-2];r.listener(l)}r.lastBarTime=n.time,r.listener(n)}}}},{key:"periodLengthSeconds",value:function(e,t){return 24*("240"==e?t/6:"D"===e||"1D"===e?t:"M"===e||"1M"===e||"43200"==e?31*t:"W"===e||"1W"===e||"10080"==e?7*t:t*parseInt(e)/1440)*60*60}}]),e}());t.default=o},1206:function(e,t,n){"use strict";n.r(t);var r=n(3),l=n(4),o=(n(42),n(131),n(153),n(1166)),f=function(){function e(t){Object(r.a)(this,e),this.self=t,this.barsUpdater=new o.default(this,t)}return Object(l.a)(e,[{key:"onReady",value:function(e){var t=this;return new Promise((function(e,n){var r=t.defaultConfiguration();t.self.getConfig&&(r=Object.assign(t.defaultConfiguration(),t.self.getConfig())),e(r)})).then((function(data){return e(data)}))}},{key:"resolveSymbol",value:function(e,t,n){var r=this;return new Promise((function(e,t){var n=r.defaultSymbol();r.self.getSymbol&&(n=Object.assign(r.defaultSymbol(),r.self.getSymbol())),e(n)})).then((function(data){return t(data)})).catch((function(e){return n(e)}))}},{key:"getBars",value:function(e,t,n,r,l,o){"4hour"!=this.self.interval&&"240"!=t||(t="240"),"1day"!=this.self.interval&&"1day"!=t||(t="1D"),"1week"!=this.self.interval&&"1week"!=t&&"10080"!=this.self.interval&&"10080"!=t||(t="10080"),"1mon"!=this.self.interval&&"1mon"!=t&&"43200"!=this.self.interval&&"43200"!=t||(t="43200");this.self.getBars(e,t,n,r,(function(data){data&&data.length?l(data,{noData:!0}):l([],{noData:!0})}))}},{key:"subscribeBars",value:function(e,t,n,r,l){"4hour"!=this.self.interval&&"240"!=t||(t="240"),"1day"!=this.self.interval&&"1day"!=t||(t="1D"),"1week"!=this.self.interval&&"1week"!=t&&"10080"!=this.self.interval&&"10080"!=t||(t="10080"),"1mon"!=this.self.interval&&"1mon"!=t&&"10080"!=this.self.interval&&"10080"!=t||(t="43200"),t?"D"==r.split("_")[1]&&(r=r.split("_")[0],r="".concat(r,"_").concat(t)):(t=this.self.oldInterval,r=r.split("_")[0],r="".concat(r,"_").concat(t)),this.barsUpdater.subscribeBars(e,t,n,r,l)}},{key:"unsubscribeBars",value:function(e){var t=null;"4hour"!=this.self.oldInterval&&"240"!=this.self.oldInterval||(t="240"),"1day"!=this.self.oldInterval&&"1D"!=this.self.oldInterval||(t="1D"),"1week"!=this.self.oldInterval&&"1W"!=this.self.oldInterval&&"10080"!=this.self.oldInterval||(t="10080"),"1mon"!=this.self.oldInterval&&"1M"!=this.self.oldInterval&&"43200"!=this.self.oldInterval||(t="43200"),t?"D"==e.split("_")[1]&&(e=e.split("_")[0],e="".concat(e,"_").concat(t)):(t=this.self.oldInterval,e=e.split("_")[0],e="".concat(e,"_").concat(t)),this.barsUpdater.unsubscribeBars(e)}},{key:"defaultConfiguration",value:function(){return{supports_search:!0,supports_group_request:!1,supported_resolutions:["1","5","15","30","60","240","10080","43200","1D","2D","3D","1W","1M"],supports_marks:!0,supports_timescale_marks:!0,supports_time:!0}}},{key:"defaultSymbol",value:function(){return{name:this.self.symbol.toLowerCase(),timezone:"Asia/Shanghai",minmov:1,minmov2:0,pointvalue:1,fractional:!1,session:"24x7",has_intraday:!0,has_no_volume:!1,description:this.self.symbol.toLowerCase(),pricescale:Number(this.self.pricescale)?Number(this.self.pricescale):100,ticker:this.self.symbol.toLowerCase(),supported_resolutions:["1","5","15","30","60","240","10080","43200","1D","2D","3D","1W","1M"]}}}]),e}();t.default=f}}]);